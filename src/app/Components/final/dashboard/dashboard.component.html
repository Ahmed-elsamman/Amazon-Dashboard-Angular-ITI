<h1>Dashboard</h1>

<section class="dashboard-container" [@fadeInUp]>
  <!-- Users Section -->
  <div class="section users-section">
    <h2>Users Overview</h2>

    <div class="cards-container">
      <div class="info-card new-users" [@cardAnimation]>
        <i class="fas fa-user-plus"></i>
        <div class="card-content">
          <h3>{{ newUsersCount }}</h3>
          <p>New Users (Last Month)</p>
        </div>
      </div>

      <div class="info-card active-users" [@cardAnimation]>
        <i class="fas fa-user-check"></i>
        <div class="card-content">
          <h3>{{ activeUsersCount }}</h3>
          <p>Active Users</p>
        </div>
      </div>

      <div class="info-card sellers" [@cardAnimation]>
        <i class="fas fa-store"></i>
        <div class="card-content">
          <h3>{{ sellersCount }}</h3>
          <p>Sellers</p>
        </div>
      </div>
    </div>

    <div class="table-container">
      <table
        mat-table
        [dataSource]="userDataSource"
        matSort
        #userSort="matSort"
        class="users-table"
      >
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
          <td mat-cell *matCellDef="let user">{{ user.name }}</td>
        </ng-container>

        <ng-container matColumnDef="email">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Email</th>
          <td mat-cell *matCellDef="let user">{{ user.email }}</td>
        </ng-container>

        <ng-container matColumnDef="role">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Role</th>
          <td mat-cell *matCellDef="let user">
            <span class="role-badge {{ user.role }}">{{ user.role }}</span>
          </td>
        </ng-container>

        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
          <td mat-cell *matCellDef="let user">
            <span class="status-badge" [class.active]="user.isActive">
              {{ user.isActive ? "Active" : "Inactive" }}
            </span>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="userColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: userColumns"></tr>
      </table>

      <mat-paginator
        #userPaginator
        [pageSize]="5"
        [pageSizeOptions]="[5, 10, 25]"
        showFirstLastButtons
      >
      </mat-paginator>
    </div>
  </div>

  <!-- Orders Section -->
  <div class="section orders-section">
    <h2>Orders Overview</h2>

    <div class="cards-container">
      <div class="info-card pending-orders" [@cardAnimation]>
        <i class="fas fa-clock"></i>
        <div class="card-content">
          <h3>{{ pendingOrdersCount }}</h3>
          <p>Pending Orders</p>
        </div>
      </div>

      <div class="info-card processing-orders" [@cardAnimation]>
        <i class="fas fa-cogs"></i>
        <div class="card-content">
          <h3>{{ processingOrdersCount }}</h3>
          <p>Processing Orders</p>
        </div>
      </div>

      <div class="info-card completed-orders" [@cardAnimation]>
        <i class="fas fa-check-circle"></i>
        <div class="card-content">
          <h3>{{ completedOrdersCount }}</h3>
          <p>Completed Orders</p>
        </div>
      </div>

      <div class="info-card cancelled-orders" [@cardAnimation]>
        <i class="fas fa-times-circle"></i>
        <div class="card-content">
          <h3>{{ cancelledOrdersCount }}</h3>
          <p>Cancelled Orders</p>
        </div>
      </div>
    </div>

    <div class="table-container">
      <table
        mat-table
        [dataSource]="orderDataSource"
        matSort
        #orderSort="matSort"
        class="orders-table"
      >
        <ng-container matColumnDef="orderNumber">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Order ID</th>
          <td mat-cell *matCellDef="let order">{{ order._id }}</td>
        </ng-container>

        <ng-container matColumnDef="customer">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Customer</th>
          <td mat-cell *matCellDef="let order">{{ order.userId }}</td>
        </ng-container>

        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
          <td mat-cell *matCellDef="let order">
            <span
              class="order-status"
              [ngClass]="getStatusClass(order.orderStatus)"
            >
              {{ order.orderStatus }}
            </span>
          </td>
        </ng-container>

        <ng-container matColumnDef="totalPrice">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Total</th>
          <td mat-cell *matCellDef="let order">${{ order.totalPrice }}</td>
        </ng-container>

        <ng-container matColumnDef="createdAt">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Date</th>
          <td mat-cell *matCellDef="let order">
            {{ formatDate(order.createdAt) }}
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="orderColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: orderColumns"></tr>
      </table>

      <mat-paginator
        #orderPaginator
        [pageSize]="5"
        [pageSizeOptions]="[5, 10, 25]"
        showFirstLastButtons
      >
      </mat-paginator>
    </div>
  </div>
</section>
